<!DOCTYPE HTML>
<html>
<head>
    <title>LuckyChest</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <link rel="stylesheet" href="demo.css" media="screen">
    <link rel="stylesheet" href="../../assets/luckydraw/box.css" media="screen">
    <link rel="stylesheet" href="../../assets/reset.css" media="screen">
    <script src="../../_src/core/zepto.js"></script>
    <script src="../../_src/core/zepto.extend.js"></script>
    <script src="../../_src/core/zepto.ui.js"></script>
</head>
<body>
<div id="container">
    <span id="text">
        请抽奖
    </span>
    <div class="luckchest">
        <!--
        <div class="prize animate"></div>
        <div class="chest waiting">
            <div class="chest-top animate"></div>
            <div class="chest-opened-top animate"></div>
            <div class="key animate"></div>
            <div class="glow animate"></div>
            <div class="chest-bottom animate"></div>
        </div>
        <div class="chest waiting">
            <div class="chest-top animate"></div>
            <div class="chest-opened-top animate"></div>
            <div class="key animate"></div>
            <div class="glow animate"></div>
            <div class="chest-bottom animate"></div>
        </div>
        <div class="chest waiting">
            <div class="chest-top animate"></div>
            <div class="chest-opened-top animate"></div>
            <div class="key animate"></div>
            <div class="glow animate"></div>
            <div class="chest-bottom animate"></div>
        </div>
        -->
    </div>
</div>

<div id="prize_dialog">
      恭喜您，抽中了surface一台
</div>

</body>
<script src="../../_src/luckydraw/box.js"></script>
<script type="text/javascript">
    (function(){

        var prizeID = Math.round(Math.random()*14+1);
        var prizeURL = 'prizes/prize'+(prizeID/10000+'').substr(2,4)+'.png';

//        var luckchest=$('div.luckchest').luckydrawbox({
//            "openFunc":sendToSerever
//        }).luckydrawbox("this");


        var luckchest= $.ui.luckydrawbox("div.luckchest",{
            "openFunc":sendToSerever
        });

        luckchest.setResult("#prize_dialog");

        function sendToSerever(){
            console.log("send to server");
            $('#prize_dialog').text("您抽中了"+prizeID+"号奖品");
        }

        $('#prize_dialog').on("click",function(){
            luckchest.restart();
        });

    })();

</script>
<!--<script src="http://192.168.79.1:8080/target/target-script-min.js#leonskywalker"></script>-->
</html>